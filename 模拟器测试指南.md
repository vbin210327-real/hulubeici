# 在Xcode模拟器中测试付费墙UI

## ✅ 准备工作已完成

- [x] StoreKit配置文件已更新，包含7天免费试用
- [x] PaywallView.swift UI已增强
- [x] Xcode已打开项目

---

## 🚀 在模拟器中运行App

### 方法 1：使用Xcode GUI（推荐）

1. **确保Xcode已打开**（已完成 ✅）

2. **选择模拟器**：
   - 在Xcode顶部工具栏，点击设备选择器
   - 选择 **"iPhone 15 Pro"** 或任何您喜欢的模拟器

3. **确认StoreKit配置**：
   - 点击菜单：**Product → Scheme → Edit Scheme...**
   - 选择左侧的 **"Run"**
   - 点击 **"Options"** 标签
   - 在 **"StoreKit Configuration"** 下拉菜单中选择 **"StoreKit.storekit"**
   - 点击 **"Close"**

4. **运行App**：
   - 按下 **⌘ + R** 或点击顶部的 **▶️ 播放按钮**
   - 等待App在模拟器中启动

5. **导航到付费墙**：
   - 根据您的App流程，可能需要：
     - 点击某个"升级"按钮
     - 进入设置页面
     - 或者如果是首次启动，可能会自动显示

---

## 🎨 预期UI效果

当您看到付费墙时，应该看到：

### **月度订阅卡片**
```
┌─────────────────────────────────────┐
│  Plus 月度                    ¥9   │
│  ¥9/月 · 可随时取消订阅             │
└─────────────────────────────────────┘
```

### **年度订阅卡片（带免费试用标签）**
```
┌─────────────────────────────────────┐
│  [🎁 前7天免费试用]  ← 渐变标签      │
│                                     │
│  Pro 年度                  ¥70     │
│  含 7 天 免费试用                   │
│  仅¥5.8/月 · 可随时取消订阅         │
└─────────────────────────────────────┘
```

**视觉特征**：
- 🎁 绿色到蓝色的渐变背景标签
- 白色礼物图标和文字
- 圆角设计，位于卡片顶部左侧
- 醒目且吸引眼球

---

## 🔍 检查要点

运行后，请验证：

- [ ] 年度订阅卡片顶部显示渐变标签
- [ ] 标签文字为"前7天免费试用"
- [ ] 标签颜色为绿色到蓝色渐变
- [ ] 标签包含礼物图标 🎁
- [ ] 月度订阅卡片**没有**显示此标签
- [ ] 整体UI美观且易读
- [ ] 点击订阅按钮可以正常触发购买流程

---

## 📱 如果遇到问题

### 问题1：看不到免费试用标签

**原因**：StoreKit配置可能未正确加载

**解决方法**：
1. 在Xcode中按 **Shift + ⌘ + K** 清理构建
2. 确认 Scheme → Run → Options → StoreKit Configuration 已选择
3. 重新运行App（⌘ + R）

### 问题2：产品价格无法加载

**原因**：StoreKit配置未正确设置

**解决方法**：
1. 检查 Edit Scheme → Run → Options → StoreKit Configuration
2. 确保选择了 **"StoreKit.storekit"**
3. 如果还是不行，尝试重启Xcode

### 问题3：App无法启动

**原因**：签名或配置问题

**解决方法**：
1. 检查签名设置：Project → Signing & Capabilities
2. 确保选择了开发团队
3. 尝试重置模拟器：Device → Erase All Content and Settings

---

## 💡 快速预览（无需运行模拟器）

如果您只想快速查看UI布局：

1. 在Xcode中打开 `PaywallView.swift`
2. 按下 **⌥ + ⌘ + Enter** 打开Canvas
3. 点击右上角的 **"Resume"** 按钮
4. Canvas会显示付费墙的实时预览

**优点**：
- ⚡ 快速更新
- 🎨 实时预览UI变化
- 🔧 可以即时调整代码查看效果

---

## ✅ 测试完成后

如果UI效果满意：
- 您的实现已经完成，无需进一步修改
- App Store Connect的配置已生效
- 生产环境中用户会看到相同的视觉效果

如果需要调整：
- 可以修改 `PaywallView.swift` 中第115-125行的标签样式
- 调整颜色、字体、间距等
- 保存后重新运行查看效果
