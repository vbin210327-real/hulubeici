# App Store Connect 订阅配置指南

本指南将帮助您在 App Store Connect 中配置葫芦背词的订阅产品。

---

## 前提条件

- ✅ 拥有 Apple Developer 账号（个人或公司）
- ✅ 已支付年度会员费用（$99 或 ¥688）
- ✅ 已创建 App ID：`com.hulubeici`
- ✅ 已创建 App 记录（在 App Store Connect 中）

---

## 步骤 1：登录 App Store Connect

1. 访问 [appstoreconnect.apple.com](https://appstoreconnect.apple.com)
2. 使用您的 Apple ID 登录
3. 点击"我的 App"

---

## 步骤 2：进入订阅配置页面

1. 在 App 列表中找到"葫芦背词"
2. 如果尚未创建，先点击 **"+" → "新建 App"**：
   - **平台**：iOS
   - **名称**：葫芦背词
   - **主要语言**：简体中文
   - **套装 ID**：com.hulubeici
   - **SKU**：可以填写 `hulubeici-ios-001`
   - **用户访问权限**：完全访问权限

3. 进入 App 详情页
4. 点击左侧边栏的 **"订阅"** 标签

---

## 步骤 3：创建订阅组

### 3.1 点击"创建订阅组"

- **订阅组引用名称**：`premium`
  - 这是内部使用的名称，用户看不到
  - 必须与代码中的 `subscriptionGroupID: 6A14F3B8` 对应（Apple 会自动生成 ID）

### 3.2 配置订阅组显示名称

为不同地区添加本地化名称：

| 语言/地区 | 显示名称 |
|-----------|----------|
| 简体中文 | 会员订阅 |
| 英语（美国） | Premium Subscription |

点击 **"创建"**

---

## 步骤 4：创建第一个订阅产品（Plus Monthly）

### 4.1 点击"创建订阅"

在刚创建的订阅组下，点击 **"添加订阅"** 或 **"+"**

### 4.2 基本信息

- **产品 ID**：`com.hulubeici.plus.monthly`
  ⚠️ **重要**：必须与代码中的 `ProductID.premiumMonthly` 完全一致
  ⚠️ **注意**：创建后无法修改！

- **引用名称**：`Plus Monthly`
  - 这是内部使用的名称，方便您在后台识别

点击 **"创建"**

### 4.3 订阅价格和可用性

1. 点击 **"订阅价格"** 标签页

2. **起始价格**：
   - 选择 **"中国大陆 (CNY)"**
   - 输入 **¥9**
   - 点击 **"下一步"**

3. **价格等效性**：
   - Apple 会自动为其他国家/地区生成等效价格
   - 查看并确认自动生成的价格
   - 美国通常为 $0.99 - $1.49
   - 点击 **"下一步"**

4. **价格计划**：
   - 默认即可，点击 **"完成"**

5. **可用性**：
   - 勾选您想要提供此订阅的国家/地区
   - 建议至少选择：中国大陆、香港、台湾、美国
   - 或选择 **"在所有地区可用"**

### 4.4 订阅时长

- **订阅时长**：选择 **"1 个月"**

### 4.5 本地化信息

点击 **"订阅本地化信息"** 标签页

**简体中文（中国）**：

- **显示名称**：`Plus 月度会员`
- **描述**：
  ```
  • 无限制创建自定义单词本
  • 高级学习统计和进度跟踪
  • AI 辅助学习每日 100 条
  • 优先客服支持
  • 所有设备iCloud自动同步
  ```

**英语（美国）**（可选）：

- **显示名称**：`Plus Monthly Membership`
- **描述**：
  ```
  • Unlimited custom word books
  • Advanced learning statistics
  • AI assistant 100 messages/day
  • Priority customer support
  • iCloud sync across all devices
  ```

### 4.6 App Store 推广（可选）

- **推广图像**：可以不上传（非必需）
- **推广文本**：留空或填写简短介绍

### 4.7 审核信息

- **审核备注**：
  ```
  这是葫芦背词的Plus月度订阅产品。
  测试账号：[如果有测试账号请提供]
  测试密码：[如果有测试密码请提供]
  ```

### 4.8 提交审核

点击右上角 **"存储"** 按钮

---

## 步骤 5：创建第二个订阅产品（Pro Yearly）

重复步骤 4，但使用以下信息：

### 5.1 基本信息

- **产品 ID**：`com.hulubeici.pro.yearly`
- **引用名称**：`Pro Yearly`

### 5.2 订阅价格

- **起始价格**：**¥70**
- 其他步骤同上

### 5.3 订阅时长

- **订阅时长**：选择 **"1 年"**

### 5.4 本地化信息

**简体中文（中国）**：

- **显示名称**：`Pro 年度会员`
- **描述**：
  ```
  • 包含 Plus 会员所有权益
  • 无限制自定义单词本
  • 高级学习统计和AI助手
  • 优先客服支持和新功能抢先体验
  • 相比月度订阅节省 35%
  • 所有设备iCloud自动同步
  ```

**英语（美国）**（可选）：

- **显示名称**：`Pro Yearly Membership`
- **描述**：
  ```
  • All Plus membership benefits
  • Unlimited custom word books
  • Advanced stats and AI assistant
  • Priority support and early access
  • Save 35% compared to monthly plan
  • iCloud sync across all devices
  ```

### 5.5 保存

点击右上角 **"存储"** 按钮

---

## 步骤 6：配置订阅组本地化

返回订阅组主页面，点击订阅组名称 **"premium"**

### 6.1 添加本地化

**简体中文（中国）**：

- **App 名称**：`葫芦背词`
- **自定义 App 名称**：留空（使用默认）

**英语（美国）**（可选）：

- **App 名称**：`Hulu Beici`
- **自定义 App 名称**：留空

点击 **"存储"**

---

## 步骤 7：配置家庭共享（可选）

如果您希望订阅可以家庭共享：

1. 进入每个订阅产品的详情页
2. 找到 **"家庭共享"** 选项
3. 勾选 **"启用家庭共享"**

⚠️ **注意**：
- 家庭共享意味着一个订阅最多可供 6 人使用
- 这会减少您的收入，但可能增加用户满意度
- 建议根据您的商业模式决定是否启用

---

## 步骤 8：测试订阅（沙盒测试）

### 8.1 创建沙盒测试账号

1. 在 App Store Connect 主页
2. 点击 **"用户和访问"**
3. 选择 **"沙盒"** 标签页
4. 点击 **"沙盒测试员"** 下的 **"+"**
5. 填写测试账号信息：
   - **名字**：Test
   - **姓氏**：User
   - **电子邮件**：使用一个未注册 Apple ID 的邮箱
   - **密码**：设置一个强密码
   - **出生日期**：选择成年人日期
   - **App Store 地区**：中国
6. 点击 **"邀请"**

### 8.2 在设备上测试

**在 iPhone/iPad 上**：

1. 打开 **"设置"**
2. 滚动到底部，找到 **"App Store"**
3. 点击 Apple ID，选择 **"退出登录"**
4. 打开您的 App（Debug 构建）
5. 尝试购买订阅
6. 登录时使用刚创建的沙盒测试账号

**预期行为**：
- 价格显示为测试价格（可能更低或免费）
- 可以重复购买和取消
- 时间加速（1小时订阅可能5分钟就过期）

---

## 步骤 9：配置隐私政策和服务条款URL

1. 返回 App 主页
2. 点击左侧 **"App 信息"**
3. 滚动到 **"隐私政策"** 部分
4. 填入您的隐私政策 URL：
   ```
   https://your-website.com/privacy-policy
   ```
   ⚠️ **注意**：
   - 必须是 HTTPS 链接
   - 必须是可公开访问的页面
   - 可以使用 GitHub Pages 托管您的 Markdown 文件

5. 点击 **"存储"**

---

## 步骤 10：提交订阅审核

### 10.1 检查清单

在提交前，确保：

- ✅ 两个订阅产品的产品 ID 正确
- ✅ 价格已设置（¥9 和 ¥70）
- ✅ 本地化信息完整
- ✅ 描述清晰，无错别字
- ✅ 隐私政策和服务条款 URL 已填写
- ✅ 订阅组已保存

### 10.2 提交审核

1. 返回 App 主页
2. 点击左侧 **"App Store"** 标签页
3. 选择或创建一个新版本（如 1.0）
4. 填写版本信息：
   - **新增功能**：描述此版本的新特性
   - **截图**：上传 iPhone 和 iPad 截图
   - **描述**：填写 App 描述
   - **关键词**：英语词汇, 背单词, 四六级, 考研英语
   - **支持 URL**：您的支持页面或联系邮箱
   - **营销 URL**：可选

5. 滚动到 **"App 内购买项目和订阅"** 部分
6. 确认两个订阅产品显示在列表中

7. 点击 **"添加以供审核"**
8. 点击右上角 **"提交以供审核"**

---

## 步骤 11：等待审核

### 审核时间线

- **初次提交**：通常需要 1-3 天
- **更新提交**：通常需要 24-48 小时
- **拒绝后重新提交**：同上

### 可能的拒绝原因

1. **订阅描述不清楚**
   - 解决方案：明确列出会员权益和限制

2. **缺少隐私政策**
   - 解决方案：确保隐私政策 URL 可访问

3. **功能无法测试**
   - 解决方案：在审核备注中提供测试账号

4. **价格问题**
   - 解决方案：确保价格符合 Apple 的定价规则

5. **免费功能太少**
   - 解决方案：确保免费用户可以使用基本功能

---

## 步骤 12：审核通过后

### 12.1 启用订阅

审核通过后，订阅产品状态会变为 **"准备提交"**

1. 进入订阅产品页面
2. 点击 **"提交"** 或 **"批准"**
3. 订阅将在下次 App 更新时生效

### 12.2 监控订阅表现

1. 点击左侧 **"Sales and Trends"**（销售和趋势）
2. 选择 **"订阅"** 标签页
3. 查看：
   - 新订阅数量
   - 续订率
   - 取消率
   - 收入统计

### 12.3 优化订阅

根据数据优化：

- 调整价格（需重新审核）
- 更新描述
- 添加促销优惠
- 优化 App 内的订阅展示

---

## 常见问题

### Q1: 产品 ID 能修改吗？

**A:** 不能！产品 ID 创建后无法修改。如果填错，只能删除重新创建。

### Q2: 价格设置错了怎么办？

**A:** 价格可以随时修改，但需要重新提交审核。

### Q3: 能否先创建一个订阅产品？

**A:** 可以，您可以先创建 Plus Monthly，之后再添加 Pro Yearly。

### Q4: 订阅审核被拒绝了怎么办？

**A:**
1. 仔细阅读拒绝原因
2. 修改相应内容
3. 在"决议中心"回复审核团队
4. 重新提交

### Q5: 如何提供免费试用？

**A:**
1. 进入订阅产品页面
2. 点击 **"订阅价格"**
3. 找到 **"引入优惠"** 部分
4. 点击 **"添加引入优惠"**
5. 选择 **"免费试用"**
6. 设置试用时长（如 7 天）
7. 点击 **"完成"**

### Q6: 订阅产品可以删除吗？

**A:** 可以，但只能删除未提交审核的产品。已上线的产品只能停用，不能删除。

---

## 下一步

完成订阅配置后，您需要：

1. ✅ 配置 iCloud Container（参见《Apple Developer Portal 配置指南》）
2. ✅ 准备 App 截图和描述
3. ✅ 提交 App 版本审核
4. ✅ 托管隐私政策和服务条款到网络上

---

## 有用的链接

- [App Store Connect 帮助](https://help.apple.com/app-store-connect/)
- [订阅产品最佳实践](https://developer.apple.com/app-store/subscriptions/)
- [价格和货币](https://developer.apple.com/help/app-store-connect/manage-pricing/set-a-price/)
- [沙盒测试](https://developer.apple.com/help/app-store-connect/test-in-app-purchases/sandbox-testing/)

---

**祝您配置顺利！🎉**

如有问题，请参考 Apple 官方文档或联系 Apple Developer 支持。
